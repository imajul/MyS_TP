
#include "xparameters.h"
#include "xil_io.h"
#include "encoder_ip.h"

#define SCALER 1440

//====================================================

int main (void) {

	int posicion, direccion;
	char *sentido[2]={"antihorario", "horario"};

    xil_printf("-- Inicio del programa para validar el uso de IP cores propios --\r\n");
 
   while(1)
   {
	    posicion = ENCODER_IP_mReadReg(XPAR_ENCODER_IP_S_AXI_BASEADDR, ENCODER_IP_S_AXI_SLV_REG0_OFFSET);
	    direccion = ENCODER_IP_mReadReg(XPAR_ENCODER_IP_S_AXI_BASEADDR, ENCODER_IP_S_AXI_SLV_REG1_OFFSET);
	    xil_printf("Posicion: %d Sentido: %s \r\n", posicion/SCALER, sentido[direccion]);
	    usleep(10_000);
   }
 
}
 
